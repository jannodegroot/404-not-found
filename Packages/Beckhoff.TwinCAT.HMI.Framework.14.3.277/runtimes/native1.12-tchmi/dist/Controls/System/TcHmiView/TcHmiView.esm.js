import{serverSidePathAndQuery}from"../../../System/System.js";import{Control as TcHmiPartial}from"../TcHmiPartial/TcHmiPartial.esm.js";class TcHmiView extends TcHmiPartial{static#tchmiFQN="TcHmi.Controls.System."+this.name;constructor(element,pcElement,attrs){super(element,pcElement,attrs)}__processAccessConfig(){super.__processAccessConfig();const currentAccess=TcHmi.Access.checkAccess(this,"observe");if(null===currentAccess);else if(currentAccess)currentAccess&&"__TcHmiViewAccess"===TcHmi.DialogManager.getDialogOwner()&&TcHmi.DialogManager.showDialog("__TcHmiViewAccess",!1);else if(TcHmi.Server.isReady()){let localization=this.__localization;const loggedInUser=TcHmi.Server.getCurrentUserConfig();4===loggedInUser.state?TcHmi.DialogManager.updateTextEx("__TcHmiViewAccess",tchmi_format_string(localization.getText("Error_Dialog_Load_View_Insufficient_Access_User_Details"),this.__id,serverSidePathAndQuery,loggedInUser.userIsInGroups.join(", "),loggedInUser.domain,loggedInUser.session,loggedInUser.name),{severity:TcHmi.DialogManager.DialogSeverity.Error}):TcHmi.DialogManager.updateTextEx("__TcHmiViewAccess",tchmi_format_string(localization.getText("Error_Dialog_Load_View_Insufficient_Access"),this.__id,serverSidePathAndQuery),{severity:TcHmi.DialogManager.DialogSeverity.Error}),TcHmi.DialogManager.showDialog("__TcHmiViewAccess",!0,TcHmi.DialogManager.DialogType.Overlay)}document.body.classList.toggle("tchmi-view-observe-disallowed",!currentAccess)}}TcHmi.Controls.registerEx("TcHmiView","TcHmi.Controls.System",TcHmiView,{injectInGlobalObject:!0});export{TcHmiView as Control};